(this["webpackJsonpsimple-rest-spa"]=this["webpackJsonpsimple-rest-spa"]||[]).push([[0],{124:function(e,t,n){"use strict";var a=n(184);n.d(t,"LocalStorage",(function(){return a.a}));var r=n(185);n.d(t,"MemoryStorage",(function(){return r.a}));n(186)},125:function(e,t,n){e.exports={Wrapper:"ChatMessage_Wrapper__3RCRO",OwnMessage:"ChatMessage_OwnMessage__2XSB5",SenderName:"ChatMessage_SenderName__3UReH"}},126:function(e,t,n){e.exports={Wrapper:"Layout_Wrapper__3uO9p",Content:"Layout_Content__1FFbA",Footer:"Layout_Footer__20rqT"}},127:function(e,t,n){e.exports={Button:"Header_Button__HX-KD"}},159:function(e,t,n){e.exports={SignUpForm:"SignUpUser_SignUpForm__3Od4a",SubmitButton:"SignUpUser_SubmitButton__823qS"}},184:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(6),r=n(10),o=function(){function e(){Object(a.a)(this,e),this.isLocalStorageAvailable=null,this.isLocalStorageAvailable=e.checkAvailability()}return Object(r.a)(e,null,[{key:"checkAvailability",value:function(){try{return localStorage.setItem("__test__","__test-value__"),localStorage.removeItem("__test__"),!0}catch(e){return console.error(e),!1}}}]),Object(r.a)(e,[{key:"set",value:function(e,t){this.isLocalStorageAvailable&&localStorage.setItem(e,JSON.stringify(t))}},{key:"get",value:function(e,t){var n=t;if(!this.isLocalStorageAvailable)return n;var a=localStorage.getItem(e);try{n=a?JSON.parse(a):t}catch(r){console.error(r)}return n}},{key:"del",value:function(e){this.isLocalStorageAvailable&&localStorage.removeItem(e)}}]),e}()},185:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(6),r=n(10),o=function(){function e(){Object(a.a)(this,e),this.data={}}return Object(r.a)(e,[{key:"set",value:function(e,t){this.data[e]=JSON.stringify(t)}},{key:"get",value:function(e,t){var n=this.data[e]||null;return n?JSON.parse(n):t}},{key:"del",value:function(e){delete this.data[e]}}]),e}()},186:function(e,t){},221:function(e,t,n){e.exports={UsersWrapper:"ManageUsers_UsersWrapper__3LuPT"}},244:function(e,t,n){e.exports=n.p+"static/media/arrow.1748438e.png"},245:function(e,t,n){e.exports={Wrapper:"MainLayout_Wrapper__3_gRT"}},246:function(e,t,n){e.exports={SignInForm:"SignInUser_SignInForm__3yhMI"}},248:function(e,t,n){e.exports={Wrapper:"UnauthorizedLayout_Wrapper__3d0om"}},249:function(e,t,n){e.exports={ProfileForm:"Profile_ProfileForm__1Yh2v"}},251:function(e,t,n){e.exports={Wrapper:"AuthChecker_Wrapper__30FrR"}},255:function(e,t,n){e.exports=n(515)},306:function(e,t){},42:function(e,t,n){e.exports={Window:"Chat_Window__2UqRv",Header:"Chat_Header__2AJs4",Content:"Chat_Content__1oWoC",Messages:"Chat_Messages__DpKke",InputWrapper:"Chat_InputWrapper__P0-h6",Arrow:"Chat_Arrow__3lavz",RotatedArrow:"Chat_RotatedArrow__2BFUb",SendButton:"Chat_SendButton__1YU2r",SlideUp:"Chat_SlideUp__30-Tx",closeChat:"Chat_closeChat__3YjoI",SlideDown:"Chat_SlideDown__1NjUx",openChat:"Chat_openChat__1xc0r"}},514:function(e,t,n){},515:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"MAIN",(function(){return j}));var r={};n.r(r),n.d(r,"USERS",(function(){return E}));var o={};n.r(o),n.d(o,"SIGN_UP",(function(){return k})),n.d(o,"SIGN_IN",(function(){return w})),n.d(o,"AUTH_ERROR",(function(){return _}));var c={};n.r(c),n.d(c,"PROFILE",(function(){return S}));var s={};n.r(s),n.d(s,"UsersModule",(function(){return He})),n.d(s,"MainModule",(function(){return Ke})),n.d(s,"AuthModule",(function(){return lt})),n.d(s,"ProfileModule",(function(){return vt}));var u=n(0),i=n.n(u),l=n(9),p=n.n(l),m=n(36),d=n(24),f=n(6),h=n(10),v=n(23),b=n(19),O=n(22),g=function e(){Object(f.a)(this,e)},y=n(44),j="/",E="/users",k="/sign-up",w="/sign-in",_="/auth-error",S="/profile",x={mainRoutes:a,userRoutes:r,authRoutes:o,profileRoutes:c},I=n(3),R=n.n(I),U=n(13),C=n(16),N=n(218),T=n(523);n(215).config();var F="https://mysterious-cove-46705.herokuapp.com",A=n(54),M=n(216),P=n.n(M),W=function(){function e(t,n){Object(f.a)(this,e),this.request=void 0,this.isRefreshing=!1,this.request=P.a.create({baseURL:t,headers:n,withCredentials:!1})}return Object(h.a)(e,[{key:"get",value:function(e){var t=e.url,n=e.data,a=e.options,r=Object(A.a)({data:n},a);return this.request.get(t,r)}},{key:"post",value:function(e){var t=e.url,n=e.data,a=e.options;return this.request.post(t,n,a)}},{key:"patch",value:function(e){var t=e.url,n=e.data,a=e.options;return this.request.patch(t,n,a)}},{key:"del",value:function(e){var t=e.url,n=e.data,a=e.options,r=Object(A.a)({url:t,data:n},a);return this.request.delete(t,r)}},{key:"put",value:function(e){var t=e.url,n=e.data,a=e.options;return this.request.put(t,n,Object(A.a)({},a))}},{key:"initInterceptors",value:function(e){var t=this,n=e.refreshTokenInterceptor;this.request.interceptors.response.use((function(e){return e}),(function(e){return 401!==e.response.status||t.isRefreshing||(t.isRefreshing=!0,n().catch((function(e){return e})).finally((function(){t.isRefreshing=!1}))),e}))}}]),e}(),q=n(31),B=n(32);var L,D=n(254),H=function(e){function t(e){var n;Object(f.a)(this,t);var a=e.config,r=e.status,o=e.request,c=e.response;return(n=Object(v.a)(this,Object(b.a)(t).call(this,c.data.message))).config=void 0,n.status=void 0,n.request=void 0,n.response=void 0,n.config=a,n.status=r,n.request=o,n.response=c,n}return Object(O.a)(t,e),t}(Object(D.a)(Error)),G=function(){function e(t,n){Object(f.a)(this,e),this.actions=void 0,this.storage=void 0,this.actions=t,this.storage=n}return Object(h.a)(e,[{key:"token",get:function(){return this.storage.get("token",null)},set:function(e){this.storage.set("token",e)}},{key:"refreshToken",get:function(){return this.storage.get("refreshToken",null)},set:function(e){this.storage.set("refreshToken",e)}}]),Object(h.a)(e,[{key:"setHeaders",value:function(){return{headers:{Authorization:this.token}}}}],[{key:"handleResponse",value:function(e,t){var n=function(){return t=e.data,Boolean(t.data)?e.data.data:e.data;var t}();if(function(e){return e>=400&&e<=503}(e.status)){var a=e.config,r=e.status,o=e.request;throw new H({config:a,status:r,request:o,response:e})}return t?t(n):n}}]),e}();function J(e){var t=e.user;return{id:t._id,name:t.name,surname:t.surname,email:t.email}}function z(e){return e.users.map((function(e){return J({user:e})}))}var K,Y=(L=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(h.a)(t,[{key:"getUsers",value:function(){var e=Object(U.a)(R.a.mark((function e(){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actions.get({url:"/users",options:this.setHeaders()});case 2:return n=e.sent,e.abrupt("return",t.handleResponse(n,z));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(U.a)(R.a.mark((function e(n){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actions.get({url:"/users/".concat(n),options:this.setHeaders()});case 2:return a=e.sent,e.abrupt("return",t.handleResponse(a,J));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateUser",value:function(){var e=Object(U.a)(R.a.mark((function e(n,a){var r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actions.put({url:"/users/".concat(n),data:a,options:this.setHeaders()});case 2:return r=e.sent,e.abrupt("return",t.handleResponse(r,J));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteUser",value:function(){var e=Object(U.a)(R.a.mark((function e(n){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actions.del({url:"/users/".concat(n),options:this.setHeaders()});case 2:return a=e.sent,e.abrupt("return",t.handleResponse(a,J));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(G),Object(q.a)(L.prototype,"getUsers",[B.a],Object.getOwnPropertyDescriptor(L.prototype,"getUsers"),L.prototype),Object(q.a)(L.prototype,"getUser",[B.a],Object.getOwnPropertyDescriptor(L.prototype,"getUser"),L.prototype),Object(q.a)(L.prototype,"updateUser",[B.a],Object.getOwnPropertyDescriptor(L.prototype,"updateUser"),L.prototype),Object(q.a)(L.prototype,"deleteUser",[B.a],Object.getOwnPropertyDescriptor(L.prototype,"deleteUser"),L.prototype),L);function X(e){var t=e.user,n=e.token;return{data:{id:t._id,name:t.name,surname:t.surname,email:t.email},tokens:{accessToken:n.accessToken,refreshToken:n.refreshToken}}}var V,$=(K=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(h.a)(t,[{key:"signUp",value:function(){var e=Object(U.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actions.post({url:"/register",data:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signIn",value:function(){var e=Object(U.a)(R.a.mark((function e(n){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actions.post({url:"/authenticate",data:n});case 2:return a=e.sent,e.abrupt("return",t.handleResponse(a,X));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInByToken",value:function(){var e=Object(U.a)(R.a.mark((function e(){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actions.get({url:"/token-authenticate",options:this.setHeaders()});case 2:return n=e.sent,e.abrupt("return",t.handleResponse(n,X));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateTokens",value:function(){var e=Object(U.a)(R.a.mark((function e(){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actions.post({url:"/authenticate/refresh",options:this.setHeaders(),data:{refreshToken:this.refreshToken}});case 2:return n=e.sent,e.abrupt("return",t.handleResponse(n,(function(e){return e.token})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(G),Object(q.a)(K.prototype,"signUp",[B.a],Object.getOwnPropertyDescriptor(K.prototype,"signUp"),K.prototype),Object(q.a)(K.prototype,"signIn",[B.a],Object.getOwnPropertyDescriptor(K.prototype,"signIn"),K.prototype),Object(q.a)(K.prototype,"signInByToken",[B.a],Object.getOwnPropertyDescriptor(K.prototype,"signInByToken"),K.prototype),Object(q.a)(K.prototype,"updateTokens",[B.a],Object.getOwnPropertyDescriptor(K.prototype,"updateTokens"),K.prototype),K),Q=n(217),Z=n.n(Q),ee=n(519),te=(V=function(){function e(){Object(f.a)(this,e),this.io=void 0,this.io=Z.a.connect(F,{transports:["websocket"]}),this.io.on("connect",(function(){return console.info("Socket connected")})),this.io.on("disconnect",(function(){return console.info("Socket disconnected")}))}return Object(h.a)(e,[{key:"sendMessage",value:function(e){this.io.emit("message",e)}},{key:"onMessage",value:function(){return Object(ee.a)(this.io,"message")}},{key:"disconnect",value:function(){this.io.disconnect()}}]),e}(),Object(q.a)(V.prototype,"sendMessage",[B.a],Object.getOwnPropertyDescriptor(V.prototype,"sendMessage"),V.prototype),Object(q.a)(V.prototype,"onMessage",[B.a],Object.getOwnPropertyDescriptor(V.prototype,"onMessage"),V.prototype),Object(q.a)(V.prototype,"disconnect",[B.a],Object.getOwnPropertyDescriptor(V.prototype,"disconnect"),V.prototype),V),ne=function(){function e(t){Object(f.a)(this,e),this.storage=t,this.socket=void 0,this.users=void 0,this.auth=void 0,this.actions=void 0,this.headers={},this.actions=new W(F,this.headers),this.socket=new te,this.users=new Y(this.actions,t),this.auth=new $(this.actions,t)}return Object(h.a)(e,[{key:"initAuthInterceptors",value:function(e){this.actions.initInterceptors(e)}}]),e}(),ae=n(124),re=i.a.createContext(null),oe=function(e){var t=e.children,n=ae.LocalStorage.checkAvailability()?new ae.LocalStorage:new ae.MemoryStorage,a=new ne(n);return i.a.createElement(re.Provider,{value:a},t)};function ce(){var e=Object(u.useContext)(re);if(!e)throw new Error("Api React Context is not defined");return e}var se=i.a.createContext(null),ue=function(e){var t,n=e.children,a=ce(),r=(t=a.storage,{getToken:function(){return t.get("token",null)},setToken:function(e,n){t.set("token",e),t.set("refreshToken",n)},resetToken:function(){t.del("token"),t.del("refreshToken")}}),o=r.getToken,c=r.setToken,s=r.resetToken,l=Object(N.a)(),p=Boolean(o()),m=Object(u.useState)(p),d=Object(C.a)(m,2),f=d[0],h=d[1],v=Object(u.useState)(""),b=Object(C.a)(v,2)[1],O=Object(u.useState)(null),g=Object(C.a)(O,2),y=g[0],j=g[1],E=function(){var e=Object(U.a)(R.a.mark((function e(){var t,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(!0),e.next=4,a.auth.updateTokens();case 4:return t=e.sent,l()&&c(t.accessToken,t.refreshToken),e.next=8,a.auth.signInByToken();case 8:n=e.sent,l()&&j(n.data),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),l()&&b(e.t0.message);case 15:return e.prev=15,l()&&h(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])})));return function(){return e.apply(this,arguments)}}();return Object(T.a)(Object(U.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.initAuthInterceptors({refreshTokenInterceptor:E}),y||!o()){e.next=17;break}return e.prev=2,h(!0),e.next=6,a.auth.signInByToken();case 6:t=e.sent,l()&&j(t.data),l()&&c(t.tokens.accessToken,t.tokens.refreshToken),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),l()&&b(e.t0.message);case 14:return e.prev=14,l()&&h(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})))),i.a.createElement(se.Provider,{value:{user:y,setAuth:function(e,t,n){j(e),c(t,n)},resetAuth:function(){j(null),s()},isLoading:f}},n)},ie=function(e){var t=e.component,n=e.location,a=Object(y.a)(e,["component","location"]),r=Object(u.useContext)(se),o=void 0!==t?t:function(){return null};return i.a.createElement(d.b,Object.assign({key:null===n||void 0===n?void 0:n.pathname},a,{render:function(){return i.a.createElement(i.a.Fragment,null,(null===r||void 0===r?void 0:r.user)?i.a.createElement(o,null):i.a.createElement(d.a,{to:x.authRoutes.AUTH_ERROR}))}}))},le=n(521),pe=n(77),me=n(518),de=n(221),fe=n.n(de),he=le.a.Text,ve=function(){var e=ce(),t=Object(d.g)(),n=Object(N.a)(),a=Object(u.useState)(!1),r=Object(C.a)(a,2),o=r[0],c=r[1],s=Object(u.useState)(""),l=Object(C.a)(s,2),p=l[0],m=l[1],f=Object(u.useState)([]),h=Object(C.a)(f,2),v=h[0],b=h[1],O=Object(u.useCallback)(Object(U.a)(R.a.mark((function t(){var a;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(!0),t.next=4,e.users.getUsers();case 4:a=t.sent,n()&&b(a.map((function(e,t){return Object(A.a)({},e,{key:t})}))),n()&&m(""),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n()&&m(t.t0.message);case 12:return t.prev=12,n()&&c(!1),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])}))),[e.users,n]),g=function(){var t=Object(U.a)(R.a.mark((function t(a){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(!0),t.next=4,e.users.deleteUser(a);case 4:n()&&m(""),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n()&&m(t.t0.message);case 10:return t.prev=10,n()&&c(!1),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[0,7,10,13]])})));return function(e){return t.apply(this,arguments)}}(),y=function(e){return Object(U.a)(R.a.mark((function t(){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(e);case 2:return t.next=4,O();case 4:case"end":return t.stop()}}),t)})))},j=[{title:"ID",dataIndex:"id",key:"id"},{title:"Name",dataIndex:"name",key:"name"},{title:"Surname",dataIndex:"surname",key:"surname"},{title:"Email",dataIndex:"email",key:"email"},{title:"Actions",dataIndex:"",key:"x",render:function(e,n){return i.a.createElement(i.a.Fragment,null,i.a.createElement(pe.a,{type:"link",onClick:(a=n.id,function(){t.push("".concat(x.profileRoutes.PROFILE,"/").concat(a))})},"Edit"),i.a.createElement(pe.a,{type:"link",onClick:y(n.id)},"Delete"));var a}}];return Object(u.useEffect)((function(){O()}),[O]),i.a.createElement("div",{className:fe.a.UsersWrapper},i.a.createElement(me.a,{dataSource:v,columns:j,loading:o,bordered:!0}),p&&i.a.createElement(he,{type:"danger"},p))},be=n(17),Oe=n(14),ge=n(1),ye=n.n(ge),je=n(47);var Ee=n(522),ke=le.a.Text,we=function(e){var t=e.error,n=e.password,a=Object(y.a)(e,["error","password"]);return i.a.createElement(i.a.Fragment,null,n?i.a.createElement(Ee.a.Password,a):i.a.createElement(Ee.a,a),t&&i.a.createElement(ke,{type:"danger"},t))};var _e=function(e,t){var n=function(n){return i.a.createElement(je.a,Object.assign({type:t},n,{component:e}))};return n.displayName="FieldWithComponent(".concat(e.displayName||e.name||"Component",")"),n}((function(e){var t=e.input,n=e.meta,a=Object(y.a)(e,["input","meta"]),r=n.touched&&a.error||n.touched&&n.error?n.error:void 0;return i.a.createElement(we,Object.assign({},t,{error:r},a))})),Se=n(42),xe=n.n(Se),Ie=n(244),Re=n.n(Ie),Ue=n(125),Ce=n.n(Ue),Ne=function(e){var t,n=e.message,a=Object(u.useContext)(se),r=Object(d.g)();return i.a.createElement("div",{className:ye()(Ce.a.Wrapper,Object(be.a)({},Ce.a.OwnMessage,Boolean(n.sender.email===(null===a||void 0===a||null===(t=a.user)||void 0===t?void 0:t.email))))},i.a.createElement("span",{className:Ce.a.SenderName,onClick:function(){r.push("".concat(x.profileRoutes.PROFILE,"/").concat(n.sender.id))}},n.sender.name),n.content)},Te=function(e){var t=e.isHidden,n=ce(),a=Object(u.useContext)(se),r=Object(u.useState)(t||!1),o=Object(C.a)(r,2),c=o[0],s=o[1],l=Object(u.useState)([]),p=Object(C.a)(l,2),m=p[0],d=p[1];Object(u.useEffect)((function(){n.socket.onMessage().subscribe((function(e){d((function(t){return[e].concat(Object(Oe.a)(t))}))}))}),[n.socket]);return i.a.createElement("div",{className:xe.a.Window},i.a.createElement("div",{className:xe.a.Header,onClick:function(){s((function(e){return!e}))}},i.a.createElement("img",{src:Re.a,className:ye()(xe.a.Arrow,Object(be.a)({},xe.a.RotatedArrow,c)),alt:"arrow"})),i.a.createElement(je.b,{onSubmit:function(e){(null===a||void 0===a?void 0:a.user)&&n.socket.sendMessage({content:e.message,sender:a.user})},render:function(e){var t,n=e.form,r=e.handleSubmit;return i.a.createElement("form",{onSubmit:function(e){r(e),n.reset()},autoComplete:"off"},i.a.createElement("div",{className:ye()(xe.a.Content,(t={},Object(be.a)(t,xe.a.SlideUp,c),Object(be.a)(t,xe.a.SlideDown,!c),t))},(null===a||void 0===a?void 0:a.user)&&i.a.createElement("div",{className:ye()(xe.a.InputWrapper)},i.a.createElement(_e,{name:"message",placeholder:"Enter your message"}),i.a.createElement(pe.a,{type:"primary",htmlType:"submit",className:xe.a.SendButton},"Send")),i.a.createElement("div",{className:xe.a.Messages},m.map((function(e,t){return i.a.createElement(Ne,{key:"".concat(e.sender.email,"_").concat(t),message:e})})))))},subscription:{}}))},Fe=n(126),Ae=n.n(Fe),Me=n(76),Pe=n(127),We=n.n(Pe),qe=[{route:x.mainRoutes.MAIN,title:"Main"},{route:x.userRoutes.USERS,title:"Users"}],Be=function(){var e=Object(u.useContext)(se),t=Object(d.h)(),n=Object(u.useState)(t.pathname),a=Object(C.a)(n,2),r=a[0],o=a[1];return i.a.createElement("header",null,i.a.createElement(Me.a,{onClick:function(e){o(e.key)},selectedKeys:[r],mode:"horizontal"},qe.map((function(e){var t=e.route,n=e.title;return i.a.createElement(Me.a.Item,{key:t},i.a.createElement(m.b,{to:t,key:t},n))})),(null===e||void 0===e?void 0:e.user)?i.a.createElement(Me.a.Item,{key:x.profileRoutes.PROFILE,className:We.a.Button},i.a.createElement(m.b,{to:"".concat(x.profileRoutes.PROFILE,"/").concat(e.user.id)},e.user.email)):i.a.createElement(Me.a.Item,{key:x.authRoutes.SIGN_IN,className:We.a.Button},i.a.createElement(m.b,{to:x.authRoutes.SIGN_IN},"Sign In")),!(null===e||void 0===e?void 0:e.user)&&i.a.createElement(Me.a.Item,{key:x.authRoutes.SIGN_UP,className:We.a.Button},i.a.createElement(m.b,{to:x.authRoutes.SIGN_UP},"Sign Up"))))},Le=function(e){var t=e.withFooter,n=e.children;return i.a.createElement("div",{className:Ae.a.Wrapper},i.a.createElement(Be,null),i.a.createElement("main",{className:Ae.a.Content},n),t&&i.a.createElement("footer",{className:Ae.a.Footer},"clicktronix@hotmail.com"))},De=function(){return i.a.createElement(Le,{withFooter:!0},i.a.createElement(ve,null),i.a.createElement(Te,{isHidden:!0}))},He=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(h.a)(t,null,[{key:"getRoutes",value:function(){return[u.createElement(ie,{path:E,component:De,exact:!0})]}}]),t}(g),Ge=n(245),Je=n.n(Ge),ze=function(){return i.a.createElement(Le,{withFooter:!0},i.a.createElement("div",{className:Je.a.Wrapper},i.a.createElement("h1",null,"Main page"),i.a.createElement(Te,null)))},Ke=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(h.a)(t,null,[{key:"getRoutes",value:function(){return[u.createElement(d.b,{path:j,component:ze,exact:!0})]}}]),t}(g),Ye=n(520);function Xe(e){return function(t){return t?void 0:e}}function Ve(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(t,n){return t||n(e)}),void 0)}}var $e=n(246),Qe=n.n($e),Ze=le.a.Text,et=function(){var e=ce(),t=Object(d.g)(),n=Object(N.a)(),a=Object(u.useContext)(se),r=Object(u.useState)(!1),o=Object(C.a)(r,2),c=o[0],s=o[1],l=Object(u.useState)(""),p=Object(C.a)(l,2),m=p[0],f=p[1],h=function(){var r=Object(U.a)(R.a.mark((function r(o){var c,u,i;return R.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,s(!0),r.next=4,e.auth.signIn(o);case 4:c=r.sent,u=c.data,i=c.tokens,null===a||void 0===a||a.setAuth(u,i.accessToken,i.refreshToken),n&&t.push(x.mainRoutes.MAIN),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),n&&f(r.t0.message);case 14:return r.prev=14,n&&s(!1),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[0,11,14,17]])})));return function(e){return r.apply(this,arguments)}}();return i.a.createElement(je.b,{onSubmit:function(e){return h(e)},render:function(e){var t=e.handleSubmit;return i.a.createElement("div",{className:Qe.a.SignInForm},i.a.createElement("h1",null,"Sign In"),i.a.createElement(Ye.a,{onFinish:t},i.a.createElement(Ye.a.Item,null,i.a.createElement(_e,{name:"email",placeholder:"Enter your email",validate:Ve(Xe("Field required"))})),i.a.createElement(Ye.a.Item,null,i.a.createElement(_e,{name:"password",placeholder:"Enter your password",validate:Ve(Xe("Field required")),password:!0})),i.a.createElement(Ye.a.Item,null,i.a.createElement(pe.a,{type:"primary",htmlType:"submit",loading:c},"Sign In")),m&&i.a.createElement(Ze,{type:"danger"},m)))},subscription:{}})},tt=function(){return i.a.createElement(Le,{withFooter:!0},i.a.createElement(et,null))},nt=n(159),at=n.n(nt),rt=le.a.Text,ot=function(){var e=ce(),t=Object(N.a)(),n=Object(u.useState)(!1),a=Object(C.a)(n,2),r=a[0],o=a[1],c=Object(u.useState)(""),s=Object(C.a)(c,2),l=s[0],p=s[1],m=function(){var n=Object(U.a)(R.a.mark((function n(a){return R.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o(!0),n.next=4,e.auth.signUp(a);case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t&&p(n.t0.message);case 9:return n.prev=9,t&&o(!1),n.finish(9);case 12:case"end":return n.stop()}}),n,null,[[0,6,9,12]])})));return function(e){return n.apply(this,arguments)}}();return i.a.createElement(je.b,{onSubmit:function(e){return m(e)},render:function(e){var t=e.handleSubmit;return i.a.createElement("div",{className:at.a.SignUpForm},i.a.createElement("h1",null,"Sign Up"),i.a.createElement(Ye.a,{onFinish:t,className:at.a.SignInForm},i.a.createElement(Ye.a.Item,null,i.a.createElement(_e,{name:"name",placeholder:"Enter your name",validate:Ve(Xe("Field required"))})),i.a.createElement(Ye.a.Item,null,i.a.createElement(_e,{name:"surname",placeholder:"Enter your surname",validate:Ve(Xe("Field required"))})),i.a.createElement(Ye.a.Item,null,i.a.createElement(_e,{name:"email",placeholder:"Enter your email",validate:Ve(Xe("Field required"))})),i.a.createElement(Ye.a.Item,null,i.a.createElement(_e,{name:"password",placeholder:"Enter your password",validate:Ve(Xe("Field required")),password:!0})),i.a.createElement(Ye.a.Item,null,i.a.createElement(pe.a,{type:"primary",htmlType:"submit",loading:r},"Sign Up")),l&&i.a.createElement(rt,{type:"danger"},l)))},subscription:{}})},ct=function(){return i.a.createElement(Le,{withFooter:!0},i.a.createElement(ot,null))},st=n(248),ut=n.n(st),it=function(){return i.a.createElement(Le,{withFooter:!0},i.a.createElement("div",{className:ut.a.Wrapper},"Sorry, but you need to"," ",i.a.createElement(m.b,{to:x.authRoutes.SIGN_IN},"sign in")," ","to view this page."))},lt=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(h.a)(t,null,[{key:"getRoutes",value:function(){return[u.createElement(d.b,{exact:!0,key:w,path:w,component:tt}),u.createElement(d.b,{exact:!0,key:k,path:k,component:ct}),u.createElement(d.b,{exact:!0,key:_,path:_,component:it})]}}]),t}(g),pt=n(249),mt=n.n(pt),dt=le.a.Text,ft=function(){var e,t=ce(),n=Object(u.useContext)(se),a=Object(d.i)().userId,r=Object(N.a)(),o=Object(u.useState)(""),c=Object(C.a)(o,2),s=c[0],l=c[1],p=Object(u.useState)({name:"",surname:"",email:"",password:"",newPassword:""}),m=Object(C.a)(p,2),f=m[0],h=m[1],v=Object(u.useState)(!1),b=Object(C.a)(v,2),O=b[0],g=b[1],y=a===(null===n||void 0===n||null===(e=n.user)||void 0===e?void 0:e.id),j=Object(u.useCallback)(Object(U.a)(R.a.mark((function e(){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=16;break}return e.prev=1,g(!0),e.next=5,t.users.getUser(a);case 5:n=e.sent,r()&&h((function(e){return Object(A.a)({},e,{},n)})),r()&&l(""),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),r()&&l(e.t0.message);case 13:return e.prev=13,r()&&g(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])}))),[t.users,r,a]),E=function(){var e=Object(U.a)(R.a.mark((function e(n){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,g(!0),e.t0=a,!e.t0){e.next=6;break}return e.next=6,t.users.updateUser(a,Object(A.a)({},n,{id:a}));case 6:r()&&l(""),e.next=12;break;case 9:e.prev=9,e.t1=e.catch(0),r()&&l(e.t1.message);case 12:return e.prev=12,r()&&g(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(t){return e.apply(this,arguments)}}();Object(u.useEffect)((function(){j()}),[j]);return i.a.createElement(je.b,{onSubmit:function(e){return E(e)},render:function(e){var t=e.handleSubmit;return i.a.createElement("div",{className:mt.a.ProfileForm},i.a.createElement("h1",null,"Edit"," ",null===f||void 0===f?void 0:f.name,"'s ","profile"),i.a.createElement(Ye.a,{onFinish:t},i.a.createElement(Ye.a.Item,null,i.a.createElement(_e,{name:"name",placeholder:"Enter your name"})),i.a.createElement(Ye.a.Item,null,i.a.createElement(_e,{name:"surname",placeholder:"Enter your surname"})),i.a.createElement(Ye.a.Item,null,i.a.createElement(_e,{name:"email",placeholder:"Enter your email"})),y&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Ye.a.Item,null,i.a.createElement(_e,{name:"password",placeholder:"Enter your current password",password:!0})),i.a.createElement(Ye.a.Item,null,i.a.createElement(_e,{name:"newPassword",placeholder:"Enter your new password",password:!0}))),i.a.createElement(Ye.a.Item,null,i.a.createElement(pe.a,{type:"primary",htmlType:"submit",loading:O},"Save")),s&&i.a.createElement(dt,{type:"danger"},s)))},initialValues:f,subscription:{}})},ht=function(){return i.a.createElement(Le,{withFooter:!0},i.a.createElement(ft,null))},vt=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(h.a)(t,null,[{key:"getRoutes",value:function(){return[u.createElement(ie,{path:"".concat(S,"/:userId"),component:ht,exact:!0})]}}]),t}(g),bt=n(156),Ot=n.n(bt),gt=(n(483),function(e){var t=e.children;return i.a.createElement(Ot.a,null,i.a.createElement(oe,null,i.a.createElement(ue,null,t)))}),yt=n(240),jt=n(251),Et=n.n(jt),kt=function(e){var t=e.children,n=Object(u.useContext)(se);return i.a.createElement(i.a.Fragment,null,(null===n||void 0===n?void 0:n.isLoading)?i.a.createElement(Le,{withFooter:!0},i.a.createElement("div",{className:Et.a.Wrapper},i.a.createElement(yt.a,{size:"large"}))):t)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(514);p.a.render(i.a.createElement((function(){return i.a.createElement(m.a,null,i.a.createElement(gt,null,i.a.createElement(kt,null,i.a.createElement(d.b,{path:"/"},i.a.createElement(d.d,null,Object.values(s).map((function(e){return e.getRoutes()})),i.a.createElement(d.a,{to:x.mainRoutes.MAIN}))))))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[255,1,2]]]);
//# sourceMappingURL=main.e5f0eafd.chunk.js.map