(this["webpackJsonpsimple-rest-spa"]=this["webpackJsonpsimple-rest-spa"]||[]).push([[0],{129:function(e,t,n){"use strict";var a=n(192);n.d(t,"LocalStorage",(function(){return a.a}));var r=n(193);n.d(t,"MemoryStorage",(function(){return r.a}));n(194)},130:function(e,t,n){e.exports={Wrapper:"ChatMessage_Wrapper__3RCRO",OwnMessage:"ChatMessage_OwnMessage__2XSB5",SenderName:"ChatMessage_SenderName__3UReH"}},131:function(e,t,n){e.exports={Wrapper:"Layout_Wrapper__3uO9p",Content:"Layout_Content__1FFbA",Footer:"Layout_Footer__20rqT"}},132:function(e,t,n){e.exports={Button:"Header_Button__HX-KD"}},168:function(e,t,n){e.exports={SignUpForm:"SignUpUser_SignUpForm__3Od4a",SubmitButton:"SignUpUser_SubmitButton__823qS"}},192:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(11),r=n(13),o=function(){function e(){Object(a.a)(this,e),this.isLocalStorageAvailable=null,this.isLocalStorageAvailable=e.checkAvailability()}return Object(r.a)(e,null,[{key:"checkAvailability",value:function(){try{return localStorage.setItem("__test__","__test-value__"),localStorage.removeItem("__test__"),!0}catch(e){return console.error(e),!1}}}]),Object(r.a)(e,[{key:"set",value:function(e,t){this.isLocalStorageAvailable&&localStorage.setItem(e,JSON.stringify(t))}},{key:"get",value:function(e,t){var n=t;if(!this.isLocalStorageAvailable)return n;var a=localStorage.getItem(e);try{n=a?JSON.parse(a):t}catch(r){console.error(r)}return n}},{key:"del",value:function(e){this.isLocalStorageAvailable&&localStorage.removeItem(e)}}]),e}()},193:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(11),r=n(13),o=function(){function e(){Object(a.a)(this,e),this.data={}}return Object(r.a)(e,[{key:"set",value:function(e,t){this.data[e]=JSON.stringify(t)}},{key:"get",value:function(e,t){var n=this.data[e]||null;return n?JSON.parse(n):t}},{key:"del",value:function(e){delete this.data[e]}}]),e}()},194:function(e,t){},238:function(e,t,n){e.exports={UsersWrapper:"ManageUsers_UsersWrapper__3LuPT"}},251:function(e,t,n){e.exports=n.p+"static/media/arrow.1748438e.png"},252:function(e,t,n){e.exports={Wrapper:"MainLayout_Wrapper__3_gRT"}},253:function(e,t,n){e.exports={SignInForm:"SignInUser_SignInForm__3yhMI"}},255:function(e,t,n){e.exports={Wrapper:"UnauthorizedLayout_Wrapper__3d0om"}},256:function(e,t,n){e.exports={Wrapper:"LogoutLayout_Wrapper__2AK3s"}},257:function(e,t,n){e.exports={ProfileForm:"Profile_ProfileForm__1Yh2v"}},258:function(e,t,n){e.exports={Wrapper:"AuthChecker_Wrapper__30FrR"}},263:function(e,t,n){e.exports=n(519)},314:function(e,t){},46:function(e,t,n){e.exports={Window:"Chat_Window__2UqRv",Header:"Chat_Header__2AJs4",Content:"Chat_Content__1oWoC",Messages:"Chat_Messages__DpKke",InputWrapper:"Chat_InputWrapper__P0-h6",Arrow:"Chat_Arrow__3lavz",RotatedArrow:"Chat_RotatedArrow__2BFUb",SendButton:"Chat_SendButton__1YU2r",SlideUp:"Chat_SlideUp__30-Tx",closeChat:"Chat_closeChat__3YjoI",SlideDown:"Chat_SlideDown__1NjUx",openChat:"Chat_openChat__1xc0r"}},518:function(e,t,n){},519:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"MAIN",(function(){return j}));var r={};n.r(r),n.d(r,"USERS",(function(){return k}));var o={};n.r(o),n.d(o,"SIGN_UP",(function(){return E})),n.d(o,"SIGN_IN",(function(){return w})),n.d(o,"AUTH_ERROR",(function(){return _})),n.d(o,"LOGOUT",(function(){return x}));var c={};n.r(c),n.d(c,"PROFILE",(function(){return S}));var s={};n.r(s),n.d(s,"UsersModule",(function(){return Ye})),n.d(s,"MainModule",(function(){return Qe})),n.d(s,"AuthModule",(function(){return gt})),n.d(s,"ProfileModule",(function(){return _t}));var u=n(0),i=n.n(u),l=n(5),p=n.n(l),m=n(37),d=n(20),f=n(11),h=n(13),b=n(24),v=n(19),O=n(23),g=function e(){Object(f.a)(this,e)},y=n(48),j="/",k="/users",E="/sign-up",w="/sign-in",_="/auth-error",x="/logout",S="/profile",I={mainRoutes:a,userRoutes:r,authRoutes:o,profileRoutes:c},C=n(3),R=n.n(C),U=n(12),T=n(9),N=n(226),F=n(527);n(223).config();var A="https://mysterious-cove-46705.herokuapp.com",M=n(59),P=n(224),W=n.n(P),L=function(){function e(t,n){Object(f.a)(this,e),this.request=void 0,this.isRefreshing=!1,this.request=W.a.create({baseURL:t,headers:n,withCredentials:!1})}return Object(h.a)(e,[{key:"get",value:function(e){var t=e.url,n=e.data,a=e.options,r=Object(M.a)({data:n},a);return this.request.get(t,r)}},{key:"post",value:function(e){var t=e.url,n=e.data,a=e.options;return this.request.post(t,n,a)}},{key:"patch",value:function(e){var t=e.url,n=e.data,a=e.options;return this.request.patch(t,n,a)}},{key:"del",value:function(e){var t=e.url,n=e.data,a=e.options,r=Object(M.a)({url:t,data:n},a);return this.request.delete(t,r)}},{key:"put",value:function(e){var t=e.url,n=e.data,a=e.options;return this.request.put(t,n,Object(M.a)({},a))}},{key:"initInterceptors",value:function(e){var t=this,n=e.refreshTokenInterceptor;this.request.interceptors.response.use((function(e){return e}),(function(e){return 401!==e.response.status||t.isRefreshing||(t.isRefreshing=!0,n().catch((function(e){return e})).finally((function(){t.isRefreshing=!1}))),e}))}}]),e}(),q=n(31),B=n(32);var D,H=n(262),G=function(e){function t(e){var n;Object(f.a)(this,t);var a=e.config,r=e.status,o=e.request,c=e.response;return(n=Object(b.a)(this,Object(v.a)(t).call(this,c.data.message))).config=void 0,n.status=void 0,n.request=void 0,n.response=void 0,n.config=a,n.status=r,n.request=o,n.response=c,n}return Object(O.a)(t,e),t}(Object(H.a)(Error)),J=function(){function e(t,n){Object(f.a)(this,e),this.actions=void 0,this.storage=void 0,this.actions=t,this.storage=n}return Object(h.a)(e,[{key:"token",get:function(){return this.storage.get("token",null)},set:function(e){this.storage.set("token",e)}},{key:"refreshToken",get:function(){return this.storage.get("refreshToken",null)},set:function(e){this.storage.set("refreshToken",e)}}]),Object(h.a)(e,[{key:"setHeaders",value:function(){return{headers:{Authorization:this.token}}}}],[{key:"handleResponse",value:function(e,t){var n=function(){return t=e.data,Boolean(t.data)?e.data.data:e.data;var t}();if(function(e){return e>=400&&e<=503}(e.status)){var a=e.config,r=e.status,o=e.request;throw new G({config:a,status:r,request:o,response:e})}return t?t(n):n}}]),e}();function z(e){var t=e.user;return{id:t._id,name:t.name,surname:t.surname,email:t.email}}function K(e){return e.users.map((function(e){return z({user:e})}))}var Y,X=(D=function(e){function t(){return Object(f.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(h.a)(t,[{key:"getUsers",value:function(){var e=Object(U.a)(R.a.mark((function e(){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actions.get({url:"/users",options:this.setHeaders()});case 2:return n=e.sent,e.abrupt("return",t.handleResponse(n,K));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(U.a)(R.a.mark((function e(n){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actions.get({url:"/users/".concat(n),options:this.setHeaders()});case 2:return a=e.sent,e.abrupt("return",t.handleResponse(a,z));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateUser",value:function(){var e=Object(U.a)(R.a.mark((function e(n,a){var r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actions.put({url:"/users/".concat(n),data:a,options:this.setHeaders()});case 2:return r=e.sent,e.abrupt("return",t.handleResponse(r,z));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteUser",value:function(){var e=Object(U.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actions.del({url:"/users/".concat(t),options:this.setHeaders()});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(J),Object(q.a)(D.prototype,"getUsers",[B.a],Object.getOwnPropertyDescriptor(D.prototype,"getUsers"),D.prototype),Object(q.a)(D.prototype,"getUser",[B.a],Object.getOwnPropertyDescriptor(D.prototype,"getUser"),D.prototype),Object(q.a)(D.prototype,"updateUser",[B.a],Object.getOwnPropertyDescriptor(D.prototype,"updateUser"),D.prototype),Object(q.a)(D.prototype,"deleteUser",[B.a],Object.getOwnPropertyDescriptor(D.prototype,"deleteUser"),D.prototype),D);function V(e){var t=e.user,n=e.token;return{data:{id:t._id,name:t.name,surname:t.surname,email:t.email},tokens:{accessToken:n.accessToken,refreshToken:n.refreshToken}}}var $,Q=(Y=function(e){function t(){return Object(f.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(h.a)(t,[{key:"signUp",value:function(){var e=Object(U.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actions.post({url:"/register",data:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signIn",value:function(){var e=Object(U.a)(R.a.mark((function e(n){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actions.post({url:"/authenticate",data:n});case 2:return a=e.sent,e.abrupt("return",t.handleResponse(a,V));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInByToken",value:function(){var e=Object(U.a)(R.a.mark((function e(){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actions.get({url:"/token-authenticate",options:this.setHeaders()});case 2:return n=e.sent,e.abrupt("return",t.handleResponse(n,V));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateTokens",value:function(){var e=Object(U.a)(R.a.mark((function e(){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actions.post({url:"/authenticate/refresh",options:this.setHeaders(),data:{refreshToken:this.refreshToken}});case 2:return n=e.sent,e.abrupt("return",t.handleResponse(n,(function(e){return e.token})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(U.a)(R.a.mark((function e(){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actions.get({url:"/logout",options:this.setHeaders()});case 2:return n=e.sent,e.abrupt("return",t.handleResponse(n,(function(e){return e.success})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(J),Object(q.a)(Y.prototype,"signUp",[B.a],Object.getOwnPropertyDescriptor(Y.prototype,"signUp"),Y.prototype),Object(q.a)(Y.prototype,"signIn",[B.a],Object.getOwnPropertyDescriptor(Y.prototype,"signIn"),Y.prototype),Object(q.a)(Y.prototype,"signInByToken",[B.a],Object.getOwnPropertyDescriptor(Y.prototype,"signInByToken"),Y.prototype),Object(q.a)(Y.prototype,"updateTokens",[B.a],Object.getOwnPropertyDescriptor(Y.prototype,"updateTokens"),Y.prototype),Object(q.a)(Y.prototype,"logout",[B.a],Object.getOwnPropertyDescriptor(Y.prototype,"logout"),Y.prototype),Y),Z=n(225),ee=n.n(Z),te=n(522),ne=($=function(){function e(){Object(f.a)(this,e),this.io=void 0,this.io=ee.a.connect(A,{transports:["websocket"]}),this.io.on("connect",(function(){return console.info("Socket connected")})),this.io.on("disconnect",(function(){return console.info("Socket disconnected")}))}return Object(h.a)(e,[{key:"sendMessage",value:function(e){this.io.emit("message",e)}},{key:"onMessage",value:function(){return Object(te.a)(this.io,"message")}},{key:"disconnect",value:function(){this.io.disconnect()}}]),e}(),Object(q.a)($.prototype,"sendMessage",[B.a],Object.getOwnPropertyDescriptor($.prototype,"sendMessage"),$.prototype),Object(q.a)($.prototype,"onMessage",[B.a],Object.getOwnPropertyDescriptor($.prototype,"onMessage"),$.prototype),Object(q.a)($.prototype,"disconnect",[B.a],Object.getOwnPropertyDescriptor($.prototype,"disconnect"),$.prototype),$),ae=function(){function e(t){Object(f.a)(this,e),this.storage=t,this.socket=void 0,this.users=void 0,this.auth=void 0,this.actions=void 0,this.headers={},this.actions=new L(A,this.headers),this.socket=new ne,this.users=new X(this.actions,t),this.auth=new Q(this.actions,t)}return Object(h.a)(e,[{key:"initAuthInterceptors",value:function(e){this.actions.initInterceptors(e)}}]),e}(),re=n(129),oe=i.a.createContext(null),ce=function(e){var t=e.children,n=re.LocalStorage.checkAvailability()?new re.LocalStorage:new re.MemoryStorage,a=new ae(n);return i.a.createElement(oe.Provider,{value:a},t)};function se(){var e=Object(u.useContext)(oe);if(!e)throw new Error("Api React Context is not defined");return e}function ue(e,t){var n=Object(u.useState)(t),a=Object(T.a)(n,2),r=a[0],o=a[1];return[r,Object(u.useCallback)((function(t){e()&&o(t)}),[e])]}var ie=i.a.createContext(null),le=function(e){var t,n=e.children,a=se(),r=(t=a.storage,{getToken:function(){return t.get("token",null)},setToken:function(e,n){t.set("token",e),t.set("refreshToken",n)},resetToken:function(){t.del("token"),t.del("refreshToken")}}),o=r.getToken,c=r.setToken,s=r.resetToken,u=Object(N.a)(),l=ue(u,Boolean(o())),p=Object(T.a)(l,2),m=p[0],d=p[1],f=ue(u,""),h=Object(T.a)(f,2)[1],b=ue(u,null),v=Object(T.a)(b,2),O=v[0],g=v[1],y=function(){var e=Object(U.a)(R.a.mark((function e(){var t,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o()){e.next=20;break}return e.prev=1,d(!0),e.next=5,a.auth.updateTokens();case 5:return t=e.sent,c(t.accessToken,t.refreshToken),e.next=9,a.auth.signInByToken();case 9:n=e.sent,g(n.data),h(""),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),h(e.t0.message);case 17:return e.prev=17,d(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,14,17,20]])})));return function(){return e.apply(this,arguments)}}();return Object(F.a)(Object(U.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.initAuthInterceptors({refreshTokenInterceptor:y}),O||!o()){e.next=18;break}return e.prev=2,d(!0),e.next=6,a.auth.signInByToken();case 6:t=e.sent,g(t.data),c(t.tokens.accessToken,t.tokens.refreshToken),h(""),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),h(e.t0.message);case 15:return e.prev=15,d(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))),i.a.createElement(ie.Provider,{value:{user:O,setAuth:function(e,t,n){g(e),c(t,n)},resetAuth:function(){g(null),s()},isLoading:m}},n)},pe=function(e){var t=e.component,n=e.location,a=Object(y.a)(e,["component","location"]),r=Object(u.useContext)(ie),o=void 0!==t?t:function(){return null};return i.a.createElement(d.b,Object.assign({key:null===n||void 0===n?void 0:n.pathname},a,{render:function(){return i.a.createElement(i.a.Fragment,null,(null===r||void 0===r?void 0:r.user)?i.a.createElement(o,null):i.a.createElement(d.a,{to:I.authRoutes.AUTH_ERROR}))}}))},me=n(524),de=n(521),fe=n(526),he=me.a.Text,be=function(e){var t=e.error,n=e.password,a=Object(y.a)(e,["error","password"]);return i.a.createElement(i.a.Fragment,null,n?i.a.createElement(fe.a.Password,a):i.a.createElement(fe.a,a),t&&i.a.createElement(he,{type:"danger"},t))},ve=n(42),Oe=n(238),ge=n.n(Oe),ye=n(525),je=function(e){var t=e.title,n=e.visible,a=e.children,r=e.onOk,o=e.onCancel;return i.a.createElement(ye.a,{title:t,visible:n,onOk:r,onCancel:o},a)},ke=function(e){var t=e.onDelete,n=e.onCancel,a=e.isShowModal;return i.a.createElement(je,{title:"Delete user",visible:a,onOk:t,onCancel:n},"Are you sure you want to delete this user?")},Ee=me.a.Text,we=function(){var e=se(),t=Object(d.g)(),n=Object(N.a)(),a=ue(n,!1),r=Object(T.a)(a,2),o=r[0],c=r[1],s=ue(n,""),l=Object(T.a)(s,2),p=l[0],m=l[1],f=ue(n,[]),h=Object(T.a)(f,2),b=h[0],v=h[1],O=ue(n,!1),g=Object(T.a)(O,2),y=g[0],j=g[1],k=ue(n,""),E=Object(T.a)(k,2),w=E[0],_=E[1],x=Object(u.useCallback)((function(){j(!0)}),[j]),S=Object(u.useCallback)((function(){j(!1)}),[j]),C=Object(u.useCallback)(Object(U.a)(R.a.mark((function t(){var n;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(!0),t.next=4,e.users.getUsers();case 4:n=t.sent,v(n.map((function(e,t){return Object(M.a)({},e,{key:t})}))),m(""),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),m(t.t0.message);case 12:return t.prev=12,c(!1),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])}))),[e.users,m,c,v]),F=Object(u.useCallback)(Object(U.a)(R.a.mark((function t(){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(!0),t.next=4,e.users.deleteUser(w);case 4:C(),S(),m(""),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),m(t.t0.message);case 12:return t.prev=12,c(!1),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])}))),[e.users,S,C,m,c,w]),A=function(e){return Object(U.a)(R.a.mark((function t(){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:_(e),x();case 2:case"end":return t.stop()}}),t)})))},P=[{title:"ID",dataIndex:"id",key:"id"},{title:"Name",dataIndex:"name",key:"name"},{title:"Surname",dataIndex:"surname",key:"surname"},{title:"Email",dataIndex:"email",key:"email"},{title:"Actions",dataIndex:"",key:"x",render:function(e,n){return i.a.createElement(i.a.Fragment,null,i.a.createElement(ve.a,{type:"link",onClick:(a=n.id,function(){t.push("".concat(I.profileRoutes.PROFILE,"/").concat(a))})},"Edit"),i.a.createElement(ve.a,{type:"link",onClick:A(n.id)},"Delete"));var a}}];return Object(u.useEffect)((function(){C()}),[C]),i.a.createElement("div",{className:ge.a.UsersWrapper},i.a.createElement(de.a,{dataSource:b,columns:P,loading:o,bordered:!0}),p&&i.a.createElement(Ee,{type:"danger"},p),i.a.createElement(ke,{onDelete:F,onCancel:S,isShowModal:y}))},_e=n(18),xe=n(16),Se=n(1),Ie=n.n(Se),Ce=n(49);var Re=function(e,t){var n=function(n){return i.a.createElement(Ce.a,Object.assign({type:t},n,{component:e}))};return n.displayName="FieldWithComponent(".concat(e.displayName||e.name||"Component",")"),n}((function(e){var t=e.input,n=e.meta,a=Object(y.a)(e,["input","meta"]),r=n.touched&&a.error||n.touched&&n.error?n.error:void 0;return i.a.createElement(be,Object.assign({},t,{error:r},a))})),Ue=n(46),Te=n.n(Ue),Ne=n(251),Fe=n.n(Ne),Ae=n(130),Me=n.n(Ae),Pe=function(e){var t,n=e.message,a=Object(u.useContext)(ie),r=Object(d.g)();return i.a.createElement("div",{className:Ie()(Me.a.Wrapper,Object(_e.a)({},Me.a.OwnMessage,Boolean(n.sender.email===(null===a||void 0===a||null===(t=a.user)||void 0===t?void 0:t.email))))},i.a.createElement("span",{className:Me.a.SenderName,onClick:function(){r.push("".concat(I.profileRoutes.PROFILE,"/").concat(n.sender.id))}},n.sender.name),n.content)},We=function(e){var t=e.isHidden,n=se(),a=Object(u.useContext)(ie),r=Object(N.a)(),o=Object(u.useState)(t||!1),c=Object(T.a)(o,2),s=c[0],l=c[1],p=ue(r,[]),m=Object(T.a)(p,2),d=m[0],f=m[1];Object(u.useEffect)((function(){n.socket.onMessage().subscribe((function(e){f((function(t){return[e].concat(Object(xe.a)(t))}))}))}),[n.socket,f]);return i.a.createElement("div",{className:Te.a.Window},i.a.createElement("div",{className:Te.a.Header,onClick:function(){l((function(e){return!e}))}},i.a.createElement("img",{src:Fe.a,className:Ie()(Te.a.Arrow,Object(_e.a)({},Te.a.RotatedArrow,s)),alt:"arrow"})),i.a.createElement(Ce.b,{onSubmit:function(e){(null===a||void 0===a?void 0:a.user)&&n.socket.sendMessage({content:e.message,sender:a.user})},render:function(e){var t,n=e.form,r=e.handleSubmit;return i.a.createElement("form",{onSubmit:function(e){r(e),n.reset()},autoComplete:"off"},i.a.createElement("div",{className:Ie()(Te.a.Content,(t={},Object(_e.a)(t,Te.a.SlideUp,s),Object(_e.a)(t,Te.a.SlideDown,!s),t))},(null===a||void 0===a?void 0:a.user)&&i.a.createElement("div",{className:Ie()(Te.a.InputWrapper)},i.a.createElement(Re,{name:"message",placeholder:"Enter your message"}),i.a.createElement(ve.a,{type:"primary",htmlType:"submit",className:Te.a.SendButton},"Send")),i.a.createElement("div",{className:Te.a.Messages},d.map((function(e,t){return i.a.createElement(Pe,{key:"".concat(e.sender.email,"_").concat(t),message:e})})))))},subscription:{}}))},Le=n(131),qe=n.n(Le),Be=n(79),De=n(132),He=n.n(De),Ge=[{route:I.mainRoutes.MAIN,title:"Main"},{route:I.userRoutes.USERS,title:"Users"}],Je=function(){var e=Object(u.useContext)(ie),t=Object(d.h)(),n=Object(u.useState)(t.pathname),a=Object(T.a)(n,2),r=a[0],o=a[1];return i.a.createElement("header",null,i.a.createElement(Be.a,{onClick:function(e){o(e.key)},selectedKeys:[r],mode:"horizontal"},Ge.map((function(e){var t=e.route,n=e.title;return i.a.createElement(Be.a.Item,{key:t},i.a.createElement(m.b,{to:t,key:t},n))})),(null===e||void 0===e?void 0:e.user)?i.a.createElement(Be.a.SubMenu,{title:e.user.email,key:I.profileRoutes.PROFILE,className:He.a.Button},i.a.createElement(Be.a.Item,null,i.a.createElement(m.b,{to:"".concat(I.profileRoutes.PROFILE,"/").concat(e.user.id)},"Profile")),i.a.createElement(Be.a.Item,null,i.a.createElement(m.b,{to:I.authRoutes.LOGOUT},"Logout"))):i.a.createElement(Be.a.Item,{key:I.authRoutes.SIGN_IN,className:He.a.Button},i.a.createElement(m.b,{to:I.authRoutes.SIGN_IN},"Sign In")),!(null===e||void 0===e?void 0:e.user)&&i.a.createElement(Be.a.Item,{key:I.authRoutes.SIGN_UP,className:He.a.Button},i.a.createElement(m.b,{to:I.authRoutes.SIGN_UP},"Sign Up"))))},ze=function(e){var t=e.withFooter,n=e.children;return i.a.createElement("div",{className:qe.a.Wrapper},i.a.createElement(Je,null),i.a.createElement("main",{className:qe.a.Content},n),t&&i.a.createElement("footer",{className:qe.a.Footer},"clicktronix@hotmail.com"))},Ke=function(){return i.a.createElement(ze,{withFooter:!0},i.a.createElement(we,null),i.a.createElement(We,{isHidden:!0}))},Ye=function(e){function t(){return Object(f.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(h.a)(t,null,[{key:"getRoutes",value:function(){return[u.createElement(pe,{path:k,component:Ke,exact:!0})]}}]),t}(g),Xe=n(252),Ve=n.n(Xe),$e=function(){return i.a.createElement(ze,{withFooter:!0},i.a.createElement("div",{className:Ve.a.Wrapper},i.a.createElement("h1",null,"Main page"),i.a.createElement(We,null)))},Qe=function(e){function t(){return Object(f.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(h.a)(t,null,[{key:"getRoutes",value:function(){return[u.createElement(d.b,{path:j,component:$e,exact:!0})]}}]),t}(g),Ze=n(523);function et(e){return function(t){return t?void 0:e}}function tt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(t,n){return t||n(e)}),void 0)}}var nt=n(253),at=n.n(nt),rt=me.a.Text,ot=function(){var e=se(),t=Object(d.g)(),n=Object(N.a)(),a=Object(u.useContext)(ie),r=ue(n,!1),o=Object(T.a)(r,2),c=o[0],s=o[1],l=ue(n,""),p=Object(T.a)(l,2),m=p[0],f=p[1],h=function(){var n=Object(U.a)(R.a.mark((function n(r){var o,c,u;return R.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s(!0),n.next=4,e.auth.signIn(r);case 4:o=n.sent,c=o.data,u=o.tokens,null===a||void 0===a||a.setAuth(c,u.accessToken,u.refreshToken),t.push(I.mainRoutes.MAIN),f(""),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),f(n.t0.message);case 15:return n.prev=15,s(!1),n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[0,12,15,18]])})));return function(e){return n.apply(this,arguments)}}();return i.a.createElement(Ce.b,{onSubmit:function(e){return h(e)},render:function(e){var t=e.handleSubmit;return i.a.createElement("div",{className:at.a.SignInForm},i.a.createElement("h1",null,"Sign In"),i.a.createElement(Ze.a,{onFinish:t},i.a.createElement(Ze.a.Item,null,i.a.createElement(Re,{name:"email",placeholder:"Enter your email",validate:tt(et("Field required"))})),i.a.createElement(Ze.a.Item,null,i.a.createElement(Re,{name:"password",placeholder:"Enter your password",validate:tt(et("Field required")),password:!0})),i.a.createElement(Ze.a.Item,null,i.a.createElement(ve.a,{type:"primary",htmlType:"submit",loading:c},"Sign In")),m&&i.a.createElement(rt,{type:"danger"},m)))},subscription:{}})},ct=function(){return i.a.createElement(ze,{withFooter:!0},i.a.createElement(ot,null))},st=n(168),ut=n.n(st),it=me.a.Text,lt=function(){var e=se(),t=Object(N.a)(),n=ue(t,!1),a=Object(T.a)(n,2),r=a[0],o=a[1],c=ue(t,""),s=Object(T.a)(c,2),u=s[0],l=s[1],p=ue(t,""),m=Object(T.a)(p,2),d=m[0],f=m[1],h=function(){var t=Object(U.a)(R.a.mark((function t(n){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o(!0),t.next=4,e.auth.signUp(n);case 4:f("User successfully registered."),l(""),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),f(""),l(t.t0.message);case 12:return t.prev=12,o(!1),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,8,12,15]])})));return function(e){return t.apply(this,arguments)}}();return i.a.createElement(Ce.b,{onSubmit:function(e){return h(e)},render:function(e){var t=e.handleSubmit;return i.a.createElement("div",{className:ut.a.SignUpForm},i.a.createElement("h1",null,"Sign Up"),i.a.createElement(Ze.a,{onFinish:t,className:ut.a.SignInForm},i.a.createElement(Ze.a.Item,null,i.a.createElement(Re,{name:"name",placeholder:"Enter your name",validate:tt(et("Field required"))})),i.a.createElement(Ze.a.Item,null,i.a.createElement(Re,{name:"surname",placeholder:"Enter your surname",validate:tt(et("Field required"))})),i.a.createElement(Ze.a.Item,null,i.a.createElement(Re,{name:"email",placeholder:"Enter your email",validate:tt(et("Field required"))})),i.a.createElement(Ze.a.Item,null,i.a.createElement(Re,{name:"password",placeholder:"Enter your password",validate:tt(et("Field required")),password:!0})),i.a.createElement(Ze.a.Item,null,i.a.createElement(ve.a,{type:"primary",htmlType:"submit",loading:r},"Sign Up")),u&&i.a.createElement(it,{type:"danger"},u),d&&i.a.createElement(it,{type:"secondary"},d)))},subscription:{}})},pt=function(){return i.a.createElement(ze,{withFooter:!0},i.a.createElement(lt,null))},mt=n(255),dt=n.n(mt),ft=function(){return i.a.createElement(ze,{withFooter:!0},i.a.createElement("div",{className:dt.a.Wrapper},"Sorry, but you need to"," ",i.a.createElement(m.b,{to:I.authRoutes.SIGN_IN},"sign in")," ","to view this page."))},ht=n(249),bt=n(256),vt=n.n(bt),Ot=function(){var e=Object(u.useContext)(oe),t=Object(u.useContext)(ie),n=Object(d.g)(),a=Object(N.a)(),r=ue(a,!1),o=Object(T.a)(r,2),c=o[0],s=o[1],l=ue(a,""),p=Object(T.a)(l,2),m=p[0],f=p[1],h=Object(u.useCallback)(Object(U.a)(R.a.mark((function a(){return R.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,s(!0),a.next=4,null===e||void 0===e?void 0:e.auth.logout();case 4:n.push(I.mainRoutes.MAIN),null===t||void 0===t||t.resetAuth(),f(""),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),f(a.t0.message);case 12:return a.prev=12,s(!1),a.finish(12);case 15:case"end":return a.stop()}}),a,null,[[0,9,12,15]])}))),[e,t,n,f,s]);return Object(u.useEffect)((function(){h()}),[h]),i.a.createElement(ze,{withFooter:!0},i.a.createElement("div",{className:vt.a.Wrapper},c&&i.a.createElement(ht.a,{size:"large"}),m&&i.a.createElement(me.a.Text,{type:"danger"},m)))},gt=function(e){function t(){return Object(f.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(h.a)(t,null,[{key:"getRoutes",value:function(){return[u.createElement(d.b,{exact:!0,key:w,path:w,component:ct}),u.createElement(d.b,{exact:!0,key:E,path:E,component:pt}),u.createElement(d.b,{exact:!0,key:_,path:_,component:ft}),u.createElement(d.b,{exact:!0,key:x,path:x,component:Ot})]}}]),t}(g),yt=n(257),jt=n.n(yt),kt=me.a.Text,Et=function(){var e,t=se(),n=Object(u.useContext)(ie),a=Object(d.i)().userId,r=Object(N.a)(),o=ue(r,""),c=Object(T.a)(o,2),s=c[0],l=c[1],p=ue(r,{name:"",surname:"",email:"",password:"",newPassword:""}),m=Object(T.a)(p,2),f=m[0],h=m[1],b=ue(r,!1),v=Object(T.a)(b,2),O=v[0],g=v[1],y=a===(null===n||void 0===n||null===(e=n.user)||void 0===e?void 0:e.id),j=Object(u.useCallback)(Object(U.a)(R.a.mark((function e(){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=16;break}return e.prev=1,g(!0),e.next=5,t.users.getUser(a);case 5:n=e.sent,h((function(e){return Object(M.a)({},e,{},n)})),l(""),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),l(e.t0.message);case 13:return e.prev=13,g(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])}))),[t.users,l,g,h,a]),k=function(){var e=Object(U.a)(R.a.mark((function e(n){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,g(!0),e.t0=a,!e.t0){e.next=6;break}return e.next=6,t.users.updateUser(a,Object(M.a)({},n,{id:a}));case 6:l(""),e.next=12;break;case 9:e.prev=9,e.t1=e.catch(0),l(e.t1.message);case 12:return e.prev=12,g(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(t){return e.apply(this,arguments)}}();Object(u.useEffect)((function(){j()}),[j]);return i.a.createElement(Ce.b,{onSubmit:function(e){return k(e)},render:function(e){var t=e.handleSubmit;return i.a.createElement("div",{className:jt.a.ProfileForm},i.a.createElement("h1",null,"Edit"," ",null===f||void 0===f?void 0:f.name,"'s ","profile"),i.a.createElement(Ze.a,{onFinish:t},i.a.createElement(Ze.a.Item,null,i.a.createElement(Re,{name:"name",placeholder:"Enter your name"})),i.a.createElement(Ze.a.Item,null,i.a.createElement(Re,{name:"surname",placeholder:"Enter your surname"})),i.a.createElement(Ze.a.Item,null,i.a.createElement(Re,{name:"email",placeholder:"Enter your email"})),y&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Ze.a.Item,null,i.a.createElement(Re,{name:"password",placeholder:"Enter your current password",password:!0})),i.a.createElement(Ze.a.Item,null,i.a.createElement(Re,{name:"newPassword",placeholder:"Enter your new password",password:!0}))),i.a.createElement(Ze.a.Item,null,i.a.createElement(ve.a,{type:"primary",htmlType:"submit",loading:O},"Save")),s&&i.a.createElement(kt,{type:"danger"},s)))},initialValues:f,subscription:{}})},wt=function(){return i.a.createElement(ze,{withFooter:!0},i.a.createElement(Et,null))},_t=function(e){function t(){return Object(f.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(h.a)(t,null,[{key:"getRoutes",value:function(){return[u.createElement(pe,{path:"".concat(S,"/:userId"),component:wt,exact:!0})]}}]),t}(g),xt=n(164),St=n.n(xt),It=(n(499),function(e){var t=e.children;return i.a.createElement(St.a,null,i.a.createElement(ce,null,i.a.createElement(le,null,t)))}),Ct=n(258),Rt=n.n(Ct),Ut=function(e){var t=e.children,n=Object(u.useContext)(ie);return i.a.createElement(i.a.Fragment,null,(null===n||void 0===n?void 0:n.isLoading)?i.a.createElement(ze,{withFooter:!0},i.a.createElement("div",{className:Rt.a.Wrapper},i.a.createElement(ht.a,{size:"large"}))):t)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(518);p.a.render(i.a.createElement((function(){return i.a.createElement(m.a,null,i.a.createElement(It,null,i.a.createElement(Ut,null,i.a.createElement(d.b,{path:"/"},i.a.createElement(d.d,null,Object.values(s).map((function(e){return e.getRoutes()})),i.a.createElement(d.a,{to:I.mainRoutes.MAIN}))))))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[263,1,2]]]);
//# sourceMappingURL=main.7fa91c2b.chunk.js.map