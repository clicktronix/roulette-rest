(this["webpackJsonpsimple-rest-spa"]=this["webpackJsonpsimple-rest-spa"]||[]).push([[0],{118:function(e,t,n){"use strict";var a=n(157);n.d(t,"LocalStorage",(function(){return a.a}));var r=n(158);n.d(t,"MemoryStorage",(function(){return r.a}));n(159)},119:function(e,t,n){e.exports={Wrapper:"Layout_Wrapper__3uO9p",Content:"Layout_Content__1FFbA",Footer:"Layout_Footer__20rqT"}},120:function(e,t,n){e.exports={Button:"Header_Button__HX-KD"}},147:function(e,t,n){e.exports={SignUpForm:"SignUpUser_SignUpForm__3Od4a",SubmitButton:"SignUpUser_SubmitButton__823qS"}},157:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(8),r=n(12),o=function(){function e(){Object(a.a)(this,e),this.isLocalStorageAvailable=null,this.isLocalStorageAvailable=e.checkAvailability()}return Object(r.a)(e,null,[{key:"checkAvailability",value:function(){try{return localStorage.setItem("__test__","__test-value__"),localStorage.removeItem("__test__"),!0}catch(e){return console.error(e),!1}}}]),Object(r.a)(e,[{key:"set",value:function(e,t){this.isLocalStorageAvailable&&localStorage.setItem(e,JSON.stringify(t))}},{key:"get",value:function(e,t){var n=t;if(!this.isLocalStorageAvailable)return n;var a=localStorage.getItem(e);try{n=a?JSON.parse(a):t}catch(r){console.error(r)}return n}},{key:"del",value:function(e){this.isLocalStorageAvailable&&localStorage.removeItem(e)}}]),e}()},158:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(8),r=n(12),o=function(){function e(){Object(a.a)(this,e),this.data={}}return Object(r.a)(e,[{key:"set",value:function(e,t){this.data[e]=JSON.stringify(t)}},{key:"get",value:function(e,t){var n=this.data[e]||null;return n?JSON.parse(n):t}},{key:"del",value:function(e){delete this.data[e]}}]),e}()},159:function(e,t){},193:function(e,t,n){e.exports={UsersWrapper:"ManageUsers_UsersWrapper__3LuPT"}},216:function(e,t,n){e.exports={Wrapper:"ChatMessage_Wrapper__3RCRO"}},218:function(e,t,n){e.exports={Wrapper:"MainLayout_Wrapper__3_gRT"}},219:function(e,t,n){e.exports={SignInForm:"SignInUser_SignInForm__3yhMI"}},220:function(e,t,n){e.exports={Wrapper:"UnauthorizedLayout_Wrapper__3d0om"}},221:function(e,t,n){e.exports={ProfileForm:"Profile_ProfileForm__1Yh2v"}},223:function(e,t,n){e.exports={Wrapper:"AuthChecker_Wrapper__30FrR"}},227:function(e,t,n){e.exports=n(457)},456:function(e,t,n){},457:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"MAIN",(function(){return j}));var r={};n.r(r),n.d(r,"USERS",(function(){return g}));var o={};n.r(o),n.d(o,"SIGN_UP",(function(){return k})),n.d(o,"SIGN_IN",(function(){return w})),n.d(o,"AUTH_ERROR",(function(){return S}));var c={};n.r(c),n.d(c,"PROFILE",(function(){return _}));var u={};n.r(u),n.d(u,"UsersModule",(function(){return je})),n.d(u,"MainModule",(function(){return Be})),n.d(u,"AuthModule",(function(){return at})),n.d(u,"ProfileModule",(function(){return it}));var s=n(0),i=n.n(s),l=n(9),p=n.n(l),m=n(33),h=n(29),d=n(8),f=n(12),v=n(22),b=n(18),O=n(21),E=function e(){Object(d.a)(this,e)},y=n(40),j="/",g="/users",k="/sign-up",w="/sign-in",S="/auth-error",_="/profile",x={mainRoutes:a,userRoutes:r,authRoutes:o,profileRoutes:c},I=n(3),U=n.n(I),R=n(14),T=n(13),C=n(190),F=n(463);n(188).config();var N={baseUrl:Object({NODE_ENV:"production",PUBLIC_URL:"=https://mysterious-cove-46705.herokuapp.com",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).BASE_URL||"https://mysterious-cove-46705.herokuapp.com"},W=n(52),P=n(189),A=n.n(P),L=function(){function e(t,n){Object(d.a)(this,e),this.request=void 0,this.isRefreshing=!1,this.request=A.a.create({baseURL:t,headers:n,withCredentials:!1})}return Object(f.a)(e,[{key:"get",value:function(e){var t=e.url,n=e.data,a=e.options,r=Object(W.a)({data:n},a);return this.request.get(t,r)}},{key:"post",value:function(e){var t=e.url,n=e.data,a=e.options;return this.request.post(t,n,a)}},{key:"patch",value:function(e){var t=e.url,n=e.data,a=e.options;return this.request.patch(t,n,a)}},{key:"del",value:function(e){var t=e.url,n=e.data,a=e.options,r=Object(W.a)({url:t,data:n},a);return this.request.delete(t,r)}},{key:"put",value:function(e){var t=e.url,n=e.data,a=e.options;return this.request.put(t,n,Object(W.a)({},a))}},{key:"initInterceptors",value:function(e){var t=this,n=e.refreshTokenInterceptor;this.request.interceptors.response.use((function(e){return e}),(function(e){return 401!==e.response.status||t.isRefreshing||(t.isRefreshing=!0,n().catch((function(e){return e})).finally((function(){t.isRefreshing=!1}))),e}))}}]),e}(),q=n(44),D=n(47);var B,M=n(226),H=function(e){function t(e){var n;Object(d.a)(this,t);var a=e.config,r=e.status,o=e.request,c=e.response;return(n=Object(v.a)(this,Object(b.a)(t).call(this,c.data.message))).config=void 0,n.status=void 0,n.request=void 0,n.response=void 0,n.config=a,n.status=r,n.request=o,n.response=c,n}return Object(O.a)(t,e),t}(Object(M.a)(Error)),G=function(){function e(t,n){Object(d.a)(this,e),this.actions=void 0,this.storage=void 0,this.actions=t,this.storage=n}return Object(f.a)(e,[{key:"token",get:function(){return this.storage.get("token",null)},set:function(e){this.storage.set("token",e)}},{key:"refreshToken",get:function(){return this.storage.get("refreshToken",null)},set:function(e){this.storage.set("refreshToken",e)}}]),Object(f.a)(e,[{key:"setHeaders",value:function(){return{headers:{Authorization:this.token}}}}],[{key:"handleResponse",value:function(e,t){var n=function(){return t=e.data,Boolean(t.data)?e.data.data:e.data;var t}();if(function(e){return e>=400&&e<=503}(e.status)){var a=e.config,r=e.status,o=e.request;throw new H({config:a,status:r,request:o,response:e})}return t?t(n):n}}]),e}();function J(e){var t=e.user;return{id:t._id,name:t.name,surname:t.surname,email:t.email}}function K(e){return e.users.map((function(e){return J({user:e})}))}var z,V=(B=function(e){function t(){return Object(d.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(f.a)(t,[{key:"getUsers",value:function(){var e=Object(R.a)(U.a.mark((function e(){var n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actions.get({url:"/users",options:this.setHeaders()});case 2:return n=e.sent,e.abrupt("return",t.handleResponse(n,K));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(R.a)(U.a.mark((function e(n){var a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actions.get({url:"/users/".concat(n),options:this.setHeaders()});case 2:return a=e.sent,e.abrupt("return",t.handleResponse(a,J));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateUser",value:function(){var e=Object(R.a)(U.a.mark((function e(n,a){var r;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actions.put({url:"/users/".concat(n),data:a,options:this.setHeaders()});case 2:return r=e.sent,e.abrupt("return",t.handleResponse(r,J));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteUser",value:function(){var e=Object(R.a)(U.a.mark((function e(n){var a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actions.del({url:"/users/".concat(n),options:this.setHeaders()});case 2:return a=e.sent,e.abrupt("return",t.handleResponse(a,J));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(G),Object(q.a)(B.prototype,"getUsers",[D.a],Object.getOwnPropertyDescriptor(B.prototype,"getUsers"),B.prototype),Object(q.a)(B.prototype,"getUser",[D.a],Object.getOwnPropertyDescriptor(B.prototype,"getUser"),B.prototype),Object(q.a)(B.prototype,"updateUser",[D.a],Object.getOwnPropertyDescriptor(B.prototype,"updateUser"),B.prototype),Object(q.a)(B.prototype,"deleteUser",[D.a],Object.getOwnPropertyDescriptor(B.prototype,"deleteUser"),B.prototype),B);function X(e){var t=e.user,n=e.token;return{data:{id:t._id,name:t.name,surname:t.surname,email:t.email},tokens:{accessToken:n.accessToken,refreshToken:n.refreshToken}}}var Y=(z=function(e){function t(){return Object(d.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(f.a)(t,[{key:"signUp",value:function(){var e=Object(R.a)(U.a.mark((function e(t){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actions.post({url:"/register",data:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signIn",value:function(){var e=Object(R.a)(U.a.mark((function e(n){var a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actions.post({url:"/authenticate",data:n});case 2:return a=e.sent,e.abrupt("return",t.handleResponse(a,X));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInByToken",value:function(){var e=Object(R.a)(U.a.mark((function e(){var n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actions.get({url:"/token-authenticate",options:this.setHeaders()});case 2:return n=e.sent,e.abrupt("return",t.handleResponse(n,X));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateTokens",value:function(){var e=Object(R.a)(U.a.mark((function e(){var n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actions.post({url:"/authenticate/refresh",options:this.setHeaders(),data:{refreshToken:this.refreshToken}});case 2:return n=e.sent,e.abrupt("return",t.handleResponse(n,(function(e){return e.token})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(G),Object(q.a)(z.prototype,"signUp",[D.a],Object.getOwnPropertyDescriptor(z.prototype,"signUp"),z.prototype),Object(q.a)(z.prototype,"signIn",[D.a],Object.getOwnPropertyDescriptor(z.prototype,"signIn"),z.prototype),Object(q.a)(z.prototype,"signInByToken",[D.a],Object.getOwnPropertyDescriptor(z.prototype,"signInByToken"),z.prototype),Object(q.a)(z.prototype,"updateTokens",[D.a],Object.getOwnPropertyDescriptor(z.prototype,"updateTokens"),z.prototype),z),$=function(){function e(t){Object(d.a)(this,e),this.storage=t,this.actions=void 0,this.headers={},this.users=void 0,this.auth=void 0,this.actions=new L(N.baseUrl,this.headers),this.users=new V(this.actions,t),this.auth=new Y(this.actions,t)}return Object(f.a)(e,[{key:"initAuthInterceptors",value:function(e){this.actions.initInterceptors(e)}}]),e}(),Q=n(118),Z=i.a.createContext(null),ee=function(e){var t=e.children,n=Q.LocalStorage.checkAvailability()?new Q.LocalStorage:new Q.MemoryStorage,a=new $(n);return i.a.createElement(Z.Provider,{value:a},t)};function te(){var e=Object(s.useContext)(Z);if(!e)throw new Error("Api React Context is not defined");return e}var ne=i.a.createContext(null),ae=function(e){var t,n=e.children,a=te(),r=(t=a.storage,{getToken:function(){return t.get("token",null)},setToken:function(e,n){t.set("token",e),t.set("refreshToken",n)},resetToken:function(){t.del("token"),t.del("refreshToken")}}),o=r.getToken,c=r.setToken,u=r.resetToken,l=Object(C.a)(),p=Boolean(o()),m=Object(s.useState)(p),h=Object(T.a)(m,2),d=h[0],f=h[1],v=Object(s.useState)(""),b=Object(T.a)(v,2)[1],O=Object(s.useState)(null),E=Object(T.a)(O,2),y=E[0],j=E[1],g=function(){var e=Object(R.a)(U.a.mark((function e(){var t,n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),e.next=4,a.auth.updateTokens();case 4:return t=e.sent,l()&&c(t.accessToken,t.refreshToken),e.next=8,a.auth.signInByToken();case 8:n=e.sent,l()&&j(n.data),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),l()&&b(e.t0.message);case 15:return e.prev=15,l()&&f(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])})));return function(){return e.apply(this,arguments)}}();return Object(F.a)(Object(R.a)(U.a.mark((function e(){var t;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.initAuthInterceptors({refreshTokenInterceptor:g}),y||!o()){e.next=17;break}return e.prev=2,f(!0),e.next=6,a.auth.signInByToken();case 6:t=e.sent,l()&&j(t.data),l()&&c(t.tokens.accessToken,t.tokens.refreshToken),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),l()&&b(e.t0.message);case 14:return e.prev=14,l()&&f(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})))),i.a.createElement(ne.Provider,{value:{user:y,setAuth:function(e,t,n){j(e),c(t,n)},resetAuth:function(){j(null),u()},isLoading:d}},n)},re=function(e){var t=e.component,n=e.location,a=Object(y.a)(e,["component","location"]),r=Object(s.useContext)(ne),o=void 0!==t?t:function(){return null};return i.a.createElement(h.b,Object.assign({key:null===n||void 0===n?void 0:n.pathname},a,{render:function(){return i.a.createElement(i.a.Fragment,null,(null===r||void 0===r?void 0:r.user)?i.a.createElement(o,null):i.a.createElement(h.a,{to:x.authRoutes.AUTH_ERROR}))}}))},oe=n(461),ce=n(75),ue=n(459),se=n(193),ie=n.n(se),le=oe.a.Text,pe=function(){var e=te(),t=Object(h.g)(),n=Object(C.a)(),a=Object(s.useState)(!1),r=Object(T.a)(a,2),o=r[0],c=r[1],u=Object(s.useState)(""),l=Object(T.a)(u,2),p=l[0],m=l[1],d=Object(s.useState)([]),f=Object(T.a)(d,2),v=f[0],b=f[1],O=Object(s.useCallback)(Object(R.a)(U.a.mark((function t(){var a;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(!0),t.next=4,e.users.getUsers();case 4:a=t.sent,n()&&b(a.map((function(e,t){return Object(W.a)({},e,{key:t})}))),n()&&m(""),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n()&&m(t.t0.message);case 12:return t.prev=12,n()&&c(!1),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])}))),[e.users,n]),E=function(){var t=Object(R.a)(U.a.mark((function t(a){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(!0),t.next=4,e.users.deleteUser(a);case 4:n()&&m(""),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n()&&m(t.t0.message);case 10:return t.prev=10,n()&&c(!1),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[0,7,10,13]])})));return function(e){return t.apply(this,arguments)}}(),y=function(e){return Object(R.a)(U.a.mark((function t(){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E(e);case 2:return t.next=4,O();case 4:case"end":return t.stop()}}),t)})))},j=[{title:"ID",dataIndex:"id",key:"id"},{title:"Name",dataIndex:"name",key:"name"},{title:"Surname",dataIndex:"surname",key:"surname"},{title:"Email",dataIndex:"email",key:"email"},{title:"Actions",dataIndex:"",key:"x",render:function(e,n){return i.a.createElement(i.a.Fragment,null,i.a.createElement(ce.a,{type:"link",onClick:(a=n.id,function(){t.push("".concat(x.profileRoutes.PROFILE,"/").concat(a))})},"Edit"),i.a.createElement(ce.a,{type:"link",onClick:y(n.id)},"Delete"));var a}}];return Object(s.useEffect)((function(){O()}),[O]),i.a.createElement("div",{className:ie.a.UsersWrapper},i.a.createElement(ue.a,{dataSource:v,columns:j,loading:o,bordered:!0}),p&&i.a.createElement(le,{type:"danger"},p))},me=n(119),he=n.n(me),de=n(74),fe=n(120),ve=n.n(fe),be=[{route:x.mainRoutes.MAIN,title:"Main"},{route:x.userRoutes.USERS,title:"Users"}],Oe=function(){var e=Object(s.useContext)(ne),t=Object(h.h)(),n=Object(s.useState)(t.pathname),a=Object(T.a)(n,2),r=a[0],o=a[1];return i.a.createElement("header",null,i.a.createElement(de.a,{onClick:function(e){o(e.key)},selectedKeys:[r],mode:"horizontal"},be.map((function(e){var t=e.route,n=e.title;return i.a.createElement(de.a.Item,{key:t},i.a.createElement(m.b,{to:t,key:t},n))})),(null===e||void 0===e?void 0:e.user)?i.a.createElement(de.a.Item,{key:x.profileRoutes.PROFILE,className:ve.a.Button},i.a.createElement(m.b,{to:"".concat(x.profileRoutes.PROFILE,"/").concat(e.user.id)},e.user.email)):i.a.createElement(de.a.Item,{key:x.authRoutes.SIGN_IN,className:ve.a.Button},i.a.createElement(m.b,{to:x.authRoutes.SIGN_IN},"Sign In")),!(null===e||void 0===e?void 0:e.user)&&i.a.createElement(de.a.Item,{key:x.authRoutes.SIGN_UP,className:ve.a.Button},i.a.createElement(m.b,{to:x.authRoutes.SIGN_UP},"Sign Up"))))},Ee=function(e){var t=e.withFooter,n=e.children;return i.a.createElement("div",{className:he.a.Wrapper},i.a.createElement(Oe,null),i.a.createElement("main",{className:he.a.Content},n),t&&i.a.createElement("footer",{className:he.a.Footer},"clicktronix@hotmail.com"))},ye=function(){return i.a.createElement(Ee,{withFooter:!0},i.a.createElement(pe,null))},je=function(e){function t(){return Object(d.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(f.a)(t,null,[{key:"getRoutes",value:function(){return[s.createElement(re,{path:g,component:ye,exact:!0})]}}]),t}(E),ge=n(17),ke=n(1),we=n.n(ke),Se=n(43),_e=n(460);var xe=n(462),Ie=oe.a.Text,Ue=function(e){var t=e.error,n=e.password,a=Object(y.a)(e,["error","password"]);return i.a.createElement(i.a.Fragment,null,n?i.a.createElement(xe.a.Password,a):i.a.createElement(xe.a,a),t&&i.a.createElement(Ie,{type:"danger"},t))};var Re=function(e,t){var n=function(n){return i.a.createElement(Se.a,Object.assign({type:t},n,{component:e}))};return n.displayName="FieldWithComponent(".concat(e.displayName||e.name||"Component",")"),n}((function(e){var t=e.input,n=e.meta,a=Object(y.a)(e,["input","meta"]),r=n.touched&&a.error||n.touched&&n.error?n.error:void 0;return i.a.createElement(Ue,Object.assign({},t,{error:r},a))})),Te=n(54),Ce=n.n(Te),Fe=n(216),Ne=n.n(Fe),We=function(e){var t=e.children;return i.a.createElement("div",{className:Ne.a.Wrapper},t)},Pe=oe.a.Text,Ae=function(){var e=Object(s.useState)(!1),t=Object(T.a)(e,2),n=t[0],a=t[1],r=Object(s.useState)(!1),o=Object(T.a)(r,2),c=o[0],u=(o[1],Object(s.useState)("")),l=Object(T.a)(u,2),p=l[0];l[1];return i.a.createElement("div",{className:Ce.a.Window},i.a.createElement("div",{className:Ce.a.Header,onClick:function(){a((function(e){return!e}))}},"Chat"),i.a.createElement(Se.b,{onSubmit:function(e){return console.info(e)},render:function(e){var t,a,r=e.handleSubmit;return i.a.createElement(_e.a,{onFinish:r},i.a.createElement("div",{className:we()(Ce.a.Content,(t={},Object(ge.a)(t,Ce.a.SlideUp,n),Object(ge.a)(t,Ce.a.SlideDown,!n),t))},i.a.createElement(We,null,"Content"),i.a.createElement(We,null,"Content"),i.a.createElement(We,null,"Content"),i.a.createElement(We,null,"Content"),i.a.createElement(We,null,"Content"),i.a.createElement(We,null,"Content"),i.a.createElement(We,null,"Content"),i.a.createElement(We,null,"Content"),i.a.createElement(We,null,"Content"),i.a.createElement(We,null,"Content"),i.a.createElement(We,null,"Content"),i.a.createElement(We,null,"Content"),i.a.createElement(We,null,"Content"),i.a.createElement(We,null,"Content"),i.a.createElement(We,null,"Content"),i.a.createElement(We,null,"Content")),i.a.createElement("div",{className:we()(Ce.a.InputWrapper,(a={},Object(ge.a)(a,Ce.a.SlideUp,n),Object(ge.a)(a,Ce.a.SlideDown,!n),a))},i.a.createElement(Re,{name:"message",placeholder:"Enter your message"}),i.a.createElement(ce.a,{type:"primary",htmlType:"submit",loading:c},"Send")),p&&i.a.createElement(Pe,{type:"danger"},p))},subscription:{}}))},Le=n(218),qe=n.n(Le),De=function(){return i.a.createElement(Ee,{withFooter:!0},i.a.createElement("div",{className:qe.a.Wrapper},i.a.createElement("h1",null,"Main page"),i.a.createElement(Ae,null)))},Be=function(e){function t(){return Object(d.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(f.a)(t,null,[{key:"getRoutes",value:function(){return[s.createElement(h.b,{path:j,component:De,exact:!0})]}}]),t}(E);function Me(e){return function(t){return t?void 0:e}}function He(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(t,n){return t||n(e)}),void 0)}}var Ge=n(219),Je=n.n(Ge),Ke=oe.a.Text,ze=function(){var e=te(),t=Object(h.g)(),n=Object(C.a)(),a=Object(s.useContext)(ne),r=Object(s.useState)(!1),o=Object(T.a)(r,2),c=o[0],u=o[1],l=Object(s.useState)(""),p=Object(T.a)(l,2),m=p[0],d=p[1],f=function(){var r=Object(R.a)(U.a.mark((function r(o){var c,s,i;return U.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,u(!0),r.next=4,e.auth.signIn(o);case 4:c=r.sent,s=c.data,i=c.tokens,null===a||void 0===a||a.setAuth(s,i.accessToken,i.refreshToken),n&&t.push(x.mainRoutes.MAIN),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),n&&d(r.t0.message);case 14:return r.prev=14,n&&u(!1),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[0,11,14,17]])})));return function(e){return r.apply(this,arguments)}}();return i.a.createElement(Se.b,{onSubmit:function(e){return f(e)},render:function(e){var t=e.handleSubmit;return i.a.createElement("div",{className:Je.a.SignInForm},i.a.createElement("h1",null,"Sign In"),i.a.createElement(_e.a,{onFinish:t},i.a.createElement(_e.a.Item,null,i.a.createElement(Re,{name:"email",placeholder:"Enter your email",validate:He(Me("Field required"))})),i.a.createElement(_e.a.Item,null,i.a.createElement(Re,{name:"password",placeholder:"Enter your password",validate:He(Me("Field required")),password:!0})),i.a.createElement(_e.a.Item,null,i.a.createElement(ce.a,{type:"primary",htmlType:"submit",loading:c},"Sign In")),m&&i.a.createElement(Ke,{type:"danger"},m)))},subscription:{}})},Ve=function(){return i.a.createElement(Ee,{withFooter:!0},i.a.createElement(ze,null))},Xe=n(147),Ye=n.n(Xe),$e=oe.a.Text,Qe=function(){var e=te(),t=Object(C.a)(),n=Object(s.useState)(!1),a=Object(T.a)(n,2),r=a[0],o=a[1],c=Object(s.useState)(""),u=Object(T.a)(c,2),l=u[0],p=u[1],m=function(){var n=Object(R.a)(U.a.mark((function n(a){return U.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o(!0),n.next=4,e.auth.signUp(a);case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t&&p(n.t0.message);case 9:return n.prev=9,t&&o(!1),n.finish(9);case 12:case"end":return n.stop()}}),n,null,[[0,6,9,12]])})));return function(e){return n.apply(this,arguments)}}();return i.a.createElement(Se.b,{onSubmit:function(e){return m(e)},render:function(e){var t=e.handleSubmit;return i.a.createElement("div",{className:Ye.a.SignUpForm},i.a.createElement("h1",null,"Sign Up"),i.a.createElement(_e.a,{onFinish:t,className:Ye.a.SignInForm},i.a.createElement(_e.a.Item,null,i.a.createElement(Re,{name:"name",placeholder:"Enter your name",validate:He(Me("Field required"))})),i.a.createElement(_e.a.Item,null,i.a.createElement(Re,{name:"surname",placeholder:"Enter your surname",validate:He(Me("Field required"))})),i.a.createElement(_e.a.Item,null,i.a.createElement(Re,{name:"email",placeholder:"Enter your email",validate:He(Me("Field required"))})),i.a.createElement(_e.a.Item,null,i.a.createElement(Re,{name:"password",placeholder:"Enter your password",validate:He(Me("Field required")),password:!0})),i.a.createElement(_e.a.Item,null,i.a.createElement(ce.a,{type:"primary",htmlType:"submit",loading:r},"Sign Up")),l&&i.a.createElement($e,{type:"danger"},l)))},subscription:{}})},Ze=function(){return i.a.createElement(Ee,{withFooter:!0},i.a.createElement(Qe,null))},et=n(220),tt=n.n(et),nt=function(){return i.a.createElement(Ee,{withFooter:!0},i.a.createElement("div",{className:tt.a.Wrapper},"Sorry, but you need to"," ",i.a.createElement(m.b,{to:x.authRoutes.SIGN_IN},"sign in")," ","to view this page."))},at=function(e){function t(){return Object(d.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(f.a)(t,null,[{key:"getRoutes",value:function(){return[s.createElement(h.b,{exact:!0,key:w,path:w,component:Ve}),s.createElement(h.b,{exact:!0,key:k,path:k,component:Ze}),s.createElement(h.b,{exact:!0,key:S,path:S,component:nt})]}}]),t}(E),rt=n(221),ot=n.n(rt),ct=oe.a.Text,ut=function(){var e,t=te(),n=Object(s.useContext)(ne),a=Object(h.i)().userId,r=Object(C.a)(),o=Object(s.useState)(""),c=Object(T.a)(o,2),u=c[0],l=c[1],p=Object(s.useState)({name:"",surname:"",email:"",password:"",newPassword:""}),m=Object(T.a)(p,2),d=m[0],f=m[1],v=Object(s.useState)(!1),b=Object(T.a)(v,2),O=b[0],E=b[1],y=a===(null===n||void 0===n||null===(e=n.user)||void 0===e?void 0:e.id),j=Object(s.useCallback)(Object(R.a)(U.a.mark((function e(){var n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=16;break}return e.prev=1,E(!0),e.next=5,t.users.getUser(a);case 5:n=e.sent,r()&&f((function(e){return Object(W.a)({},e,{},n)})),r()&&l(""),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),r()&&l(e.t0.message);case 13:return e.prev=13,r()&&E(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])}))),[t.users,r,a]),g=function(){var e=Object(R.a)(U.a.mark((function e(n){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,E(!0),e.t0=a,!e.t0){e.next=6;break}return e.next=6,t.users.updateUser(a,Object(W.a)({},n,{id:a}));case 6:r()&&l(""),e.next=12;break;case 9:e.prev=9,e.t1=e.catch(0),r()&&l(e.t1.message);case 12:return e.prev=12,r()&&E(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(t){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){j()}),[j]);return i.a.createElement(Se.b,{onSubmit:function(e){return g(e)},render:function(e){var t=e.handleSubmit;return i.a.createElement("div",{className:ot.a.ProfileForm},i.a.createElement("h1",null,"Edit"," ",null===d||void 0===d?void 0:d.name,"'s ","profile"),i.a.createElement(_e.a,{onFinish:t},i.a.createElement(_e.a.Item,null,i.a.createElement(Re,{name:"name",placeholder:"Enter your name"})),i.a.createElement(_e.a.Item,null,i.a.createElement(Re,{name:"surname",placeholder:"Enter your surname"})),i.a.createElement(_e.a.Item,null,i.a.createElement(Re,{name:"email",placeholder:"Enter your email"})),y&&i.a.createElement(i.a.Fragment,null,i.a.createElement(_e.a.Item,null,i.a.createElement(Re,{name:"password",placeholder:"Enter your current password",password:!0})),i.a.createElement(_e.a.Item,null,i.a.createElement(Re,{name:"newPassword",placeholder:"Enter your new password",password:!0}))),i.a.createElement(_e.a.Item,null,i.a.createElement(ce.a,{type:"primary",htmlType:"submit",loading:O},"Save")),u&&i.a.createElement(ct,{type:"danger"},u)))},initialValues:d,subscription:{}})},st=function(){return i.a.createElement(Ee,{withFooter:!0},i.a.createElement(ut,null))},it=function(e){function t(){return Object(d.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(f.a)(t,null,[{key:"getRoutes",value:function(){return[s.createElement(re,{path:"".concat(_,"/:userId"),component:st,exact:!0})]}}]),t}(E),lt=n(144),pt=n.n(lt),mt=(n(425),function(e){var t=e.children;return i.a.createElement(pt.a,null,i.a.createElement(ee,null,i.a.createElement(ae,null,t)))}),ht=n(212),dt=n(223),ft=n.n(dt),vt=function(e){var t=e.children,n=Object(s.useContext)(ne);return i.a.createElement(i.a.Fragment,null,(null===n||void 0===n?void 0:n.isLoading)?i.a.createElement(Ee,{withFooter:!0},i.a.createElement("div",{className:ft.a.Wrapper},i.a.createElement(ht.a,{size:"large"}))):t)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(456);p.a.render(i.a.createElement((function(){return i.a.createElement(m.a,null,i.a.createElement(mt,null,i.a.createElement(vt,null,i.a.createElement(h.b,{path:"/"},i.a.createElement(h.d,null,Object.values(u).map((function(e){return e.getRoutes()})),i.a.createElement(h.a,{to:x.mainRoutes.MAIN}))))))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},54:function(e,t,n){e.exports={Window:"Chat_Window__2UqRv",Header:"Chat_Header__2AJs4",Content:"Chat_Content__1oWoC",InputWrapper:"Chat_InputWrapper__P0-h6",SlideUp:"Chat_SlideUp__30-Tx",SlideDown:"Chat_SlideDown__1NjUx"}}},[[227,1,2]]]);
//# sourceMappingURL=main.f4c123eb.chunk.js.map